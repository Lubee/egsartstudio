window.fc=window.fc||{},window.fc.adapter=window.fc.adapter||{},function(n,e){"use strict";window.zsSdk=function(){function zsSdk(){}return zsSdk.init=function(){console.log("zsSdk.init"),qg.onError(function(n){console.error(`vivo error message is ${n.message}`)})},zsSdk.login=function(n,e){console.log("zsSdk.login..","vivo平台版本为："+qg.getSystemInfoSync().platformVersionCode),qg.getSystemInfoSync().platformVersionCode>=1053?qg.login().then(e=>{if(e.data.token){var i=JSON.stringify(e.data);console.log(i),n&&n.runWith({identityId:e.data.token})}},n=>{e&&e.runWith(JSON.stringify(n)),console.log("vivo login fail",JSON.stringify(n))}):qg.authorize({type:"code",success:function(e){console.log(e),n&&n.runWith({identityId:e.code})},fail:function(n,i){e&&e.runWith(JSON.stringify(i)),console.log("vivo login fail",JSON.stringify(n))}})},zsSdk.loadSubpackage=function(n,e,i,o){if(qg.getSystemInfoSync().platformVersionCode>=1052){console.log("---------------loadSubpackage: "+n);var t=qg.loadSubpackage({name:n,success(n){i&&i.runWith(1)},fail(n){o&&o.runWith(1)}});return!!t&&(e&&t.onProgressUpdate(function(n){e.runWith(n.progress)}),!0)}console.log("---------------require: "+n)},zsSdk.createUserInfoButton=function(n,e){},zsSdk.showUserInfoButton=function(){},zsSdk.hideUserInfoButton=function(){},zsSdk.destroyUserInfoButton=function(){},zsSdk.openShare=function(n,e){},zsSdk.videoAd=null,zsSdk.videoCompletedHandler=null,zsSdk.videoInterruptHandler=null,zsSdk.videoErrorHandler=null,zsSdk.firstPlay=!1,zsSdk.videoLiveTime=6e4,zsSdk.videoLastShowTime=0,zsSdk.initVideoAD=function(n){if(console.log("~~~~~~~~~~~视频广告videoAdUnit：",n),null!=n&&""!=n){this.videoAd=qg.createRewardedVideoAd({posId:n,style:{}}),this.firstPlay=!0;var e=this;this.videoAd.onError(n=>{console.log("激励广告展示失败",n.errCode,JSON.stringify(n)),e.videoErrorHandler&&e.videoErrorHandler.runWith(n)}),this.videoAd.onClose(n=>{n&&n.isEnded||void 0===n?(console.log("激励视频广告完成"),e.videoCompletedHandler&&(console.log(" 执行激励视频广告完成回调"),e.videoCompletedHandler.run())):(console.log("播放中途退出，不下发游戏奖励"),e.videoInterruptHandler&&e.videoInterruptHandler.run())})}},zsSdk.isVideoEnable=function(){return null!=this.videoAd},zsSdk.playVideo=function(n,e,i){if(null==this.videoAd)return i&&i.runWith("video disable"),void console.log("激励广告未初始化");if(this.videoLastShowTime>0&&Date.now()-this.videoLastShowTime<this.videoLiveTime)i&&i.runWith("暂时没有视频资源");else{console.log("播放激励广告。。"),this.videoErrorHandler=i,this.videoCompletedHandler=n,this.videoInterruptHandler=e;var o=this;this.firstPlay?o.videoAd.show():o.videoAd.load().then(()=>{o.videoAd.show()}),this.firstPlay=!1,this.videoLastShowTime=Date.now()}},zsSdk.bannerAd=null,zsSdk.bannerAdUnit=null,zsSdk.bannerAdUnit2=null,zsSdk.bannerLiveTime=1e4,zsSdk.bannerLastShowTime=0,zsSdk.initBannerAD=function(n,e,i){console.log("初始化banner",n),this.bannerAdUnit=n,this.bannerAdUnit2=e,this.bannerLiveTime=i,this.bannerLastShowTime=0},zsSdk.showBanner=function(n){if(null!=this.bannerAdUnit&&null!=this.bannerAdUnit2&&""!=this.bannerAdUnit&&""!=this.bannerAdUnit2&&!(this.bannerLastShowTime>0&&Date.now()-this.bannerLastShowTime<this.bannerLiveTime)){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null);var e=Math.random()<.5?this.bannerAdUnit:this.bannerAdUnit2;if(console.log("显示banner",e),this.bannerAd=qg.createBannerAd({posId:e,style:{}}),this.bannerLastShowTime=Date.now(),null!=this.bannerAd){this.bannerAd.onError(n=>{console.log("banner广告展示失败onError",JSON.stringify(n))});var i=this.bannerAd.show();i&&i.then(()=>{console.log("banner显示成功")})}}},zsSdk.hideBanner=function(){if(this.bannerAd){console.log("隐藏banner");var n=this.bannerAd.hide();n&&n.then(()=>{console.log("banner广告隐藏成功")}).catch(n=>{console.log("banner广告隐藏失败",n)})}},zsSdk.insertAd=null,zsSdk.insertAdUnitId=null,zsSdk.initInsertAd=function(n,e){null!=n&&""!=n&&(zsSdk.insertAdUnitId=n,console.log("初始化插屏广告："+n))},zsSdk.loadInsertAd=function(n,e){console.log("~~~~~~~~~加载插屏广告"),null!=this.insertAdUnitId&&""!=this.insertAdUnitId&&(this.insertAd=qg.createInterstitialAd({posId:this.insertAdUnitId,style:{}}),null!=this.insertAd&&(this.insertAd.onLoad(()=>{n&&n.run()}),this.insertAd.onError(n=>{console.log("插屏广告错误事件",n.errMsg,n.errCode),this.insertAd=null,e&&e.runWith(n)})))},zsSdk.showInsertAd=function(n){null!=this.insertAd&&(this.insertAd.onClose(()=>{this.insertAd=null,n&&n.run()}),this.insertAd.show())},zsSdk.nativeAd=null,zsSdk.nativeAdUnitId1=null,zsSdk.nativeAdUnitId2=null,zsSdk.nativeCurrentAdList=null,zsSdk.loadErrorNum=0,zsSdk.initNativeAd=function(n,e){console.log("原生广告初始化"),null==n||null==e||qg.getSystemInfoSync().platformVersionCode<1053||""==n||""==e||(this.nativeAdUnitId1=n,this.nativeAdUnitId2=e)},zsSdk.loadNativeAd=function(n,e){if(null==this.nativeAdUnitId1||null==this.nativeAdUnitId2||qg.getSystemInfoSync().platformVersionCode<1053)e&&e.run();else{var i=Math.random()<.5?this.nativeAdUnitId1:this.nativeAdUnitId2;this.nativeAd=null,this.nativeAd=qg.createNativeAd({posId:i});var o=this;if(this.nativeAd.onError(n=>{console.log("原生广告加载失败",JSON.stringify(n),"self.loadErrorNum:"+o.loadErrorNum),e&&e.run()}),this.nativeAd.onLoad(e=>{console.log("原生广告加载完成",JSON.stringify(e)),e&&e.adList&&n&&n.runWith(e.adList.pop())}),null!=this.nativeAd)o.nativeAd.load();else e&&e.run()}},zsSdk.reportNativeAdShow=function(n){this.nativeAd&&this.nativeAd.reportAdShow({adId:n.toString()})},zsSdk.reportNativeAdClick=function(n){this.nativeAd&&(console.log("reportNativeAdClick:"+Date.now()),this.nativeAd.reportAdClick({adId:n.toString()}))},zsSdk.hasDesktopIcon=function(n){qg.hasShortcutInstalled({success:function(e){n&&n.runWith({hasIcon:e})},fail:function(n){console.log("request desktop icon error:"+JSON.stringify(n))}})},zsSdk.createDesktopIcon=function(n){qg.installShortcut({success:function(){console.log("create DesktopIcon success",n),n&&n.runWith({hasIcon:!0})},fail:function(n){console.log("create desktop icon fail",n)},complete:function(){console.log("create desktop icon complete")}})},zsSdk.setUserCloudStorage=function(n,e,i,o){},zsSdk.getNetworkType=function(n){qg.getNetworkType({success:function(e){console.log(`handling success: ${e.type}`),"none"==e.type?qg.showDialog({title:"提示",message:"当前网络不可用，请检查是否连接网络",buttons:[{text:"退出游戏",color:"#33dd44"}],success:function(n){console.log("handling callback"),qg.exitApplication()},cancel:function(){qg.exitApplication()},fail:function(n,e){qg.exitApplication()}}):n&&n.run()}})},zsSdk}(),window.zsDevice=function(){function zsDevice(){}return zsDevice.deviceInfo=null,zsDevice.init=function(){this.deviceInfo=qg.getSystemInfoSync(),console.log(this.deviceInfo),console.log("zsDevice.init")},zsDevice.onShow=function(n){qg.onShow(function(e){console.log("zsDevice.show:"+Date.now()),n&&n.runWith(e)})},zsDevice.onHide=function(n){qg.onHide(function(){console.log("zsDevice.hide:"+Date.now()),n&&n.run()})},zsDevice.vibrateShort=function(){qg.vibrateShort({fail:function(){console.log("vibrateShort failed")},success:function(){},complete:function(){}})},zsDevice.vibrateLong=function(){qg.vibrateLong({fail:function(){console.log("vibrateLong failed")},success:function(){},complete:function(){}})},zsDevice.isNetValid=function(){return!0},zsDevice.statusBarHeight=function(){var n=qg.getNotchHeightSync();return console.log("现在的缺口高度为：",n,n.height),n?n.height:0},zsDevice.screenWidth=function(){return this.deviceInfo?this.deviceInfo.screenWidth:1},zsDevice.screenHeight=function(){return this.deviceInfo?this.deviceInfo.screenHeight:1},zsDevice}()}(window.fc.adapter,Laya);