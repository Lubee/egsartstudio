window.fc=window.fc||{},window.fc.adapter=window.fc.adapter||{},function(n,e){"use strict";window.zsSdk=function(){function zsSdk(){}return zsSdk.rewardedVideoAd=null,zsSdk.videoCompletedHandler=null,zsSdk.videoInterruptHandler=null,zsSdk.videoErrorHandler=null,zsSdk.bannerAd=null,zsSdk.isWait=!1,zsSdk.isShow=!1,zsSdk.isPoint=!1,zsSdk.lastFreshtime=0,zsSdk.appBoxAd=null,zsSdk.bannerAdUnitId=null,zsSdk.fullScreenAD=null,zsSdk.fullScreenADUnitId=null,zsSdk.userInfoButton=null,zsSdk.bannerAdScale=.9,zsSdk.bannerLiveTime=0,zsSdk.bannerLastShowTime=0,zsSdk.loadHandler=null,zsSdk.videoLoad=!1,zsSdk.bannerReady=!0,zsSdk.audioArr=[],zsSdk.srcIdxObj={},zsSdk.blockAd=null,zsSdk.blockAdLoaded=!1,zsSdk.qqVersion="1.0.0",zsSdk.init=function(){console.log("zsSdk.init==========")},zsSdk.login=function(n,e){console.log("qq .login.........."),qq.login({success:function(o){o.code?(console.log("====================CODE:"+o.code),n&&n.runWith({identityId:o.code})):(console.log("Code不存在"),e&&e.runWith("Code不存在"))},fail:function(){console.log("登录失败"),e&&e.runWith("登陆失败")},complete:function(){}})},zsSdk.loadSubpackage=function(n,e,o,i){qq.loadSubpackage({name:n,success:function(e){o.run(),console.log("分包"+n+"加载成功")},fail:function(e){i.run(),console.log("分包"+n+"加载失败",JSON.stringify(e))}})},zsSdk.createUserInfoButton=function(n,e){},zsSdk.showUserInfoButton=function(){this.userInfoButton&&this.userInfoButton.show()},zsSdk.hideUserInfoButton=function(){this.userInfoButton&&this.userInfoButton.hide()},zsSdk.destroyUserInfoButton=function(){this.userInfoButton&&(this.userInfoButton.destroy(),this.userInfoButton=null)},zsSdk.openShare=function(n,e,o,i){qq.shareAppMessage({title:n,imageUrl:e,success:function(){console.log("分享成功")},fail:function(){console.log("分享失败"),i&&i.run()},complete:function(){console.log("分享结束"),o&&o.run()}})},zsSdk.initVideoAD=function(n,e){if(this.rewardedVideoAd=qq.createRewardedVideoAd({adUnitId:n}),null!=this.rewardedVideoAd){var o=this;this.rewardedVideoAd.onLoad(function(){o.videoLoad=!0,console.debug("video加载成功"+o.videoLoad)}),this.rewardedVideoAd.onError(function(n){console.debug("视频报错:"+JSON.stringify(n)),o.videoLoad=!1,o.rewardedVideoAd=null,e&&e.runWith(n),o.videoErrorHandler&&o.videoErrorHandler.runWith(n)}),this.rewardedVideoAd.onClose(function(n){o.videoLoad=!1,o.rewardedVideoAd.load(),n&&n.isEnded||void 0===n?o.videoCompletedHandler&&o.videoCompletedHandler.run():o.videoInterruptHandler&&o.videoInterruptHandler.run()})}else console.debug("初始化vide失败")},zsSdk.isVideoEnable=function(){return null!=this.rewardedVideoAd},zsSdk.playVideo=function(n,e,o){if(null!=this.rewardedVideoAd){this.videoErrorHandler=o,this.videoCompletedHandler=n,this.videoInterruptHandler=e;var i=this;console.debug("当前是否加载"+i.videoLoad),i.videoLoad?(i.rewardedVideoAd.show(),i.videoLoad=!1):(console.debug("视频还未准备好"),i.rewardedVideoAd.load().then(function(){console.debug("加载后展示"),i.rewardedVideoAd.show(),i.videoLoad=!1}))}else o&&o.runWith("video disable")},zsSdk.oldTimer=null,zsSdk.initBannerAd=function(n,e,o,i,t){this.bannerAdUnitId=n,this.bannerAdScale=e,this.bannerLiveTime=o,this.bannerLastShowTime=0,this.lastFreshtime=Date.now(),this.bannerReady=!1,this.loadHandler=t;var d=qq.getSystemInfoSync();if(this.bannerAd=qq.createBannerAd({adUnitId:n,style:{top:d.windowHeight-150,width:.9*d.windowWidth,left:.05*d.windowWidth}}),null!=this.bannerAd){var s=this;this.bannerAd.onLoad(function(){s.bannerReady=!0,console.log("banner加载完毕"),s.loadHandler&&(console.log("loadHandler Run"),s.loadHandler.run())}),this.oldTimer&&clearTimeout(this.oldTimer),this.oldTimer=setTimeout(function(){s.bannerReady=!0},1e4),this.bannerAd.onResize(function(n){s.bannerAd&&(0!=s.bannerAdScale?(s.bannerAd.style.top=d.windowHeight-n.height,s.bannerAd.style.left=.5*(d.windowWidth-n.width)):(s.bannerAd.style.top=d.windowHeight-1,s.bannerAd.style.left=d.windowWidth-1))}),this.bannerAd.onError(function(n){console.debug("banner报错"+JSON.stringify(n)),s.hideBanner(),s.bannerReady=!1,setTimeout(function(){s.bannerReady=!0},5e3),i&&i.run()})}},zsSdk.showBanner=function(n){if(null!=this.bannerAdUnitId)if(null!=this.bannerAd){if(this.bannerAd){if(!this.bannerReady)return void console.debug("banner尚未加载完毕");console.log("showBannerAD"),this.bannerAd.show(),this.bannerLastShowTime=Date.now(),this.isShow=!0}}else console.log("banner未存在")},zsSdk.hideBanner=function(){this.isShow=!1,this.loadHandler=null,this.bannerAd?(this.bannerAd.destroy(),this.bannerAd=null,this.lastFreshtime=0):console.debug("没有banner？？")},zsSdk.initAppBox=function(n,e,o){console.log("box广告初始化...."),this.appBoxAd||(console.log("appBoxId："+n),this.appBoxAd=qq.createAppBox({adUnitId:n}),this.appBoxAd.load())},zsSdk.initBlockAd=function(n){if(this.blockAd);else{if(this.blockAdUnit=n,console.log("blockAd"+n),void 0===qq.createBlockAd)return void console.debug("QQ版本过低，无法展示积木广告");this.blockAd=qq.createBlockAd({adUnitId:n,size:5,orientation:"landscape",style:{left:60,top:200}});var e=this;this.blockAd.onLoad(function(){e.blockAdLoaded=!0}),this.blockAd.onError(function(n){try{console.debug(JSON.stringify(n))}catch(e){console.debug(n)}})}},zsSdk.showBlockAd=function(){this.blockAd&&this.blockAdLoaded&&this.blockAd.show()},zsSdk.hideBlockAd=function(){if(this.blockAd&&this.blockAdLoaded){if(this.blockAd.hide(),!this.blockAd)return console.debug("隐藏自带销毁"),void this.initBlockAd(this.blockAdUnit);this.blockAd.destroy(),this.blockAd=null,this.initBlockAd(this.blockAdUnit)}},zsSdk.showShareMenu=function(n,e){window.qq&&(window.qq.showShareMenu(),qq.onShareAppMessage(()=>({title:n,imageUrl:e})))},zsSdk.showAppBox=function(){this.appBoxAd?this.appBoxAd.show():(console.log("AppBox未初始化"),this.appBoxAd=qq.createAppBox({adUnitId:zs.laya.platform.ADConfig.zs_box_adunit}))},zsSdk.initFullScreenAD=function(n,e){var o=qq.getSystemInfoSync();o.SDKVersion<="2.6.0"?e&&e.runWith(o.SDKVersion+" <= 2.6.0"):this.fullScreenADUnitId=n},zsSdk.loadFullScreenAD=function(n,e){if(null!=this.fullScreenADUnitId&&(this.fullScreenAD=qq.createInterstitialAd({adUnitId:this.fullScreenADUnitId}),null!=this.fullScreenAD)){var o=this;this.fullScreenAD.onLoad(function(){n&&n.run()}),this.fullScreenAD.onError(function(n){console.log(n),o.fullScreenAD=null,e&&e.runWith(n)})}},zsSdk.showFullScreenAD=function(n){if(null!=this.fullScreenAD){var e=this;this.fullScreenAD.onClose(function(){e.fullScreenAD=null,n&&n.runWith(err)}),this.fullScreenAD.show()}},zsSdk.setUserCloudStorage=function(n,e,o,i){qq.setUserCloudStorage({KVDataList:n,success:function(n){console.log("-----success:"+JSON.stringify(n)),e&&e.runWith(n)},fail:function(n){console.log("-----fail:"+JSON.stringify(n)),o&&o.runWith(n)},complete:function(n){console.log("-----complete:"+JSON.stringify(n)),i&&i.runWith(n)}})},zsSdk.playSound=function(n,e,o){var i=null;let t=this;if(this.srcIdxObj[n]&&(i=this.audioArr[this.srcIdxObj[n].idx],console.debug("取到"+n+"的音频"),!this.srcIdxObj[n].isStop))return console.debug(n+"已在播放中"),void(t.continiu=!0);if(!i)for(var d=0;d<this.audioArr.length;d++)if(this.audioArr[d].paused){i=this.audioArr[d];break}i||(i=qq.createInnerAudioContext(),this.audioArr.push(i),i.onError(function(n){console.debug("音效播放异常  code "+JSON.stringify(n)),t.audioArr.splice(t.srcIdxObj[i.src].idx),delete t.srcIdxObj[i.src],i.destroy()})),i.src=n,i.loop=e,this.srcIdxObj[n]={idx:this.audioArr.indexOf(i),ptime:(new Date).getTime(),isStop:!1,curTime:0},i.onEnded(function(){o&&o.run()}),i.play()},zsSdk.pauseSound=function(n){var e=this.audioArr[this.srcIdxObj[n].idx];e&&(e.pause(),e.offEnded())},zsSdk.stopSound=function(n){if(this.srcIdxObj[n]){this.continiu=!1;var e=(new Date).getTime()-this.srcIdxObj[n].ptime;if(e<300){console.debug("间隔过短，延时关闭");let o=this;setTimeout(function(){if(o.srcIdxObj[n]){var e=o.audioArr[o.srcIdxObj[n].idx];!e||o.srcIdxObj[n].isStop||o.continiu||(o.srcIdxObj[n].isStop=!0,e.stop(),e.offEnded(),console.debug("进入延时关闭"))}},300-e)}else{var o=this.audioArr[this.srcIdxObj[n].idx];o.stop(),o.offEnded(),this.srcIdxObj[n].isStop=!0,console.debug("进入关闭")}}},zsSdk.compareVersion=function(n){for(var e=n.split("."),o=this.qqVersion.split("."),i=Math.max(e.length,o.length);e.length<i;)e.push("0");for(;o.length<i;)o.push("0");for(var t=0;t<i;t++){var d=parseInt(e[t]),s=parseInt(o[t]);if(d>s)return 1;if(d<s)return-1}return 0},zsSdk}(),window.zsDevice=function(){function zsDevice(){}return zsDevice.deviceInfo=null,zsDevice.init=function(){this.deviceInfo=qq.getSystemInfoSync(),console.log(this.deviceInfo),console.log("zsDevice.init")},zsDevice.onShow=function(n){qq.onShow(function(e){console.debug("zsDevice.show:"+Date.now()),n&&n.runWith(e)})},zsDevice.onHide=function(n){qq.onHide(function(){console.debug("zsDevice.hide:"+Date.now()),n&&n.run()})},zsDevice.vibrateShort=function(){qq.vibrateShort({fail:function(){console.log("vibrateShort failed")}})},zsDevice.vibrateLong=function(){qq.vibrateLong({fail:function(){console.log("vibrateShort failed")}})},zsDevice.isNetValid=function(){return!0},zsDevice.statusBarHeight=function(){return this.deviceInfo?this.deviceInfo.statusBarHeight:0},zsDevice.screenWidth=function(){return this.deviceInfo?this.deviceInfo.screenWidth:1},zsDevice.screenHeight=function(){return this.deviceInfo?this.deviceInfo.screenHeight:1},zsDevice}()}(window.fc.adapter,Laya);